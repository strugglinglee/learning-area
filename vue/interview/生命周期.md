# 生命周期

## 说一下你对Vue的生命周期的理解

- 简单回答
  - beforeCreate、created、beforeMount、mounted、beforeUpdate、updated、beforeDestroy、destroyed。
  - keep-alive 有自己独立的钩子函数 activated 和 deactivated。
- 复杂回答

| `<div style="width:120px">生命周期</div>`  | 发生了什么    |
| --- | --- |
|  beforeCreate   |  在当前阶段data、methods、computed以及watch上的数据和方法都不能被访问   |
|  **created**   |   在实例创建完成后发生，当前阶段已经**完成了数据观测**，也就是可以使用数据，更改数据，在这里更改数据不会触发updated函数。可以做一些**初始数据的获取**，在当前阶段无法与Dom进行交互，如果非要想，可以通过`vm.$nextTick`来访问Dom  |
|  beforeMount   |  发生在挂载之前，在这之前template模板已导入渲染函数编译。而当前阶段虚拟Dom已经创建完成，即将开始渲染。在此时也可以对数据进行更改，不会触发updated   |
| **mounted**    |  在挂载完成后发生，在当前阶段，**真实的Dom挂载完毕**，**数据完成双向绑定**，**可以访问到Dom节点**，使用`$refs`属性对Dom进行操作   |
|  beforeUpdate   |  发生在更新之前，也就是响应式数据发生更新，虚拟dom重新渲染之前被触发，你可以在当前阶段进行更改数据，不会造成重渲染   |
|  updated   |  发生在更新完成之后，当前阶段组件Dom已完成更新。要注意的是避免在此期间更改数据，因为这可能会导致无限循环的更新   |
|  **beforeDestroy**   | 发生在实例销毁之前，在当前阶段实例完全可以被使用，我们可以在这时进行**善后收尾**工作，**比如清除计时器**  |
|  destroyed   |  发生在实例销毁之后，这个时候只剩下了dom空壳。组件已被拆解，数据绑定被卸除，监听被移出，子实例也统统被销毁   |
|  activited keep-alive 专属   |  组件被激活时调用   |
|  deactivated keep-alive 专属   |  组件被销毁时调用   |

## Vue中组件生命周期调用顺序是什么样的？

- 组件的调用顺序都是先父后子,渲染完成的顺序是先子后父。
- 组件的销毁操作是先父后子，销毁完成的顺序是先子后父。

## 在什么阶段才能访问操作DOM？

在钩子函数 mounted 被调用前，Vue 已经将编译好的模板挂载到页面上，所以在 mounted 中可以访问操作 DOM。

## 你的接口请求一般放在哪个生命周期中？

- 可以在钩子函数 created、beforeMount、mounted 中进行调用，因为在这三个钩子函数中，data 已经创建，可以将服务端端返回的数据进行赋值。
- 但是推荐在 created 钩子函数中调用异步请求，因为在 created 钩子函数中调用异步请求有以下优点：
  - 能更快获取到服务端数据，减少页面loading 时间；
  - ssr不支持 beforeMount 、mounted 钩子函数，所以放在 created 中有助于一致性；
