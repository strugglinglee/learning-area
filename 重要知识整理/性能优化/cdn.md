# CDN

## 定义

CDN （Content Delivery Network，即内容分发网络）

指的是一组分布在各个地区的服务器。这些服务器存储着数据的副本，因此服务器可以根据哪些服务器与用户距离最近，来满足数据的请求。

CDN 提供快速服务，较少受高流量影响。

## 核心

CDN 的核心点有两个，一个是**缓存**，一个是**回源**。

- “缓存”就是说我们把资源 copy 一份到 CDN 服务器上这个过程
- “回源”就是说 CDN 发现自己没有这个资源（一般是缓存的数据过期了），转头向**根服务器（或者它的上层服务器）**去要这个资源的过程。

### 回源-缓存的处理

CDN节点的缓存内容不是实时更新的，只有当缓存内容到期后才能回源请求最新的内容并更新节点缓存。

可以通过设置缓存过期时间规则或者提交刷新请求来实现缓存内容的更新。

## 作用

被用来存放静态资源

### 对比根服务器

根服务器核心任务在于生成动态页面或返回非纯静态页面

## 优化细节

### 减少cookie开销

Cookie 是紧跟域名的。同一个域名下的所有请求，都会携带 Cookie。Cookie 虽然小，请求却可以有很多，随着请求的叠加，这样的不必要的 Cookie 带来的开销很大。

同一个域名下的请求会不分青红皂白地携带 Cookie，而静态资源往往并不需要 Cookie 携带什么认证信息。把静态资源和主页面置于不同的域名下，完美地避免了不必要的 Cookie 的出现！

### 突破浏览器对同一域名连接数的限制

可以多开几个http连接，突破浏览器对同一域名的连接数的限制
