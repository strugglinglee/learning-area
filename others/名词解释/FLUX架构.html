<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>FLUX架构 | 阿李贝斯的学习文档</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="偶尔学习，经常摸鱼">
    
    <link rel="preload" href="/learning-area/assets/css/0.styles.d66e2873.css" as="style"><link rel="preload" href="/learning-area/assets/js/app.58839253.js" as="script"><link rel="preload" href="/learning-area/assets/js/2.716a5f7b.js" as="script"><link rel="preload" href="/learning-area/assets/js/45.ba115e4e.js" as="script"><link rel="prefetch" href="/learning-area/assets/js/10.4c99c6fb.js"><link rel="prefetch" href="/learning-area/assets/js/11.3d112523.js"><link rel="prefetch" href="/learning-area/assets/js/12.d69cba20.js"><link rel="prefetch" href="/learning-area/assets/js/13.cdd4109a.js"><link rel="prefetch" href="/learning-area/assets/js/14.74df265f.js"><link rel="prefetch" href="/learning-area/assets/js/15.8a194637.js"><link rel="prefetch" href="/learning-area/assets/js/16.63068e52.js"><link rel="prefetch" href="/learning-area/assets/js/17.4b46660c.js"><link rel="prefetch" href="/learning-area/assets/js/18.aa4e1b67.js"><link rel="prefetch" href="/learning-area/assets/js/19.68df8c3e.js"><link rel="prefetch" href="/learning-area/assets/js/20.6b0c130b.js"><link rel="prefetch" href="/learning-area/assets/js/21.fdd306ab.js"><link rel="prefetch" href="/learning-area/assets/js/22.ccbd191a.js"><link rel="prefetch" href="/learning-area/assets/js/23.5ac67f0a.js"><link rel="prefetch" href="/learning-area/assets/js/24.3919b708.js"><link rel="prefetch" href="/learning-area/assets/js/25.bb583916.js"><link rel="prefetch" href="/learning-area/assets/js/26.f2395d9b.js"><link rel="prefetch" href="/learning-area/assets/js/27.67a3d5d0.js"><link rel="prefetch" href="/learning-area/assets/js/28.1f3475f2.js"><link rel="prefetch" href="/learning-area/assets/js/29.c79f6d6d.js"><link rel="prefetch" href="/learning-area/assets/js/3.0429201d.js"><link rel="prefetch" href="/learning-area/assets/js/30.7fac781f.js"><link rel="prefetch" href="/learning-area/assets/js/31.b47b85c1.js"><link rel="prefetch" href="/learning-area/assets/js/32.7af47993.js"><link rel="prefetch" href="/learning-area/assets/js/33.bcac607a.js"><link rel="prefetch" href="/learning-area/assets/js/34.3189284f.js"><link rel="prefetch" href="/learning-area/assets/js/35.95da6cab.js"><link rel="prefetch" href="/learning-area/assets/js/36.09d7a37c.js"><link rel="prefetch" href="/learning-area/assets/js/37.33ad84f1.js"><link rel="prefetch" href="/learning-area/assets/js/38.614a7f35.js"><link rel="prefetch" href="/learning-area/assets/js/39.9574c4ab.js"><link rel="prefetch" href="/learning-area/assets/js/4.b8e6b09b.js"><link rel="prefetch" href="/learning-area/assets/js/40.32b9f825.js"><link rel="prefetch" href="/learning-area/assets/js/41.d2f45f48.js"><link rel="prefetch" href="/learning-area/assets/js/42.f49058cd.js"><link rel="prefetch" href="/learning-area/assets/js/43.1bc8d954.js"><link rel="prefetch" href="/learning-area/assets/js/44.da6fc0a9.js"><link rel="prefetch" href="/learning-area/assets/js/46.0e2d32c9.js"><link rel="prefetch" href="/learning-area/assets/js/47.353a124a.js"><link rel="prefetch" href="/learning-area/assets/js/48.51745627.js"><link rel="prefetch" href="/learning-area/assets/js/49.fc1ff06a.js"><link rel="prefetch" href="/learning-area/assets/js/5.96c345d9.js"><link rel="prefetch" href="/learning-area/assets/js/50.398b6979.js"><link rel="prefetch" href="/learning-area/assets/js/51.95786043.js"><link rel="prefetch" href="/learning-area/assets/js/52.bb9c841d.js"><link rel="prefetch" href="/learning-area/assets/js/53.e09832e2.js"><link rel="prefetch" href="/learning-area/assets/js/54.eae5029d.js"><link rel="prefetch" href="/learning-area/assets/js/55.3c6868bd.js"><link rel="prefetch" href="/learning-area/assets/js/56.3a9decdb.js"><link rel="prefetch" href="/learning-area/assets/js/57.028cefdf.js"><link rel="prefetch" href="/learning-area/assets/js/58.bddd7a1e.js"><link rel="prefetch" href="/learning-area/assets/js/59.07734ae7.js"><link rel="prefetch" href="/learning-area/assets/js/6.276fad14.js"><link rel="prefetch" href="/learning-area/assets/js/60.a5a61c67.js"><link rel="prefetch" href="/learning-area/assets/js/61.e141d06d.js"><link rel="prefetch" href="/learning-area/assets/js/62.46b72e37.js"><link rel="prefetch" href="/learning-area/assets/js/63.828f27a3.js"><link rel="prefetch" href="/learning-area/assets/js/64.d699e398.js"><link rel="prefetch" href="/learning-area/assets/js/65.1cc27a7a.js"><link rel="prefetch" href="/learning-area/assets/js/66.9304efa4.js"><link rel="prefetch" href="/learning-area/assets/js/67.b02638fa.js"><link rel="prefetch" href="/learning-area/assets/js/68.fc9a90e7.js"><link rel="prefetch" href="/learning-area/assets/js/69.65a1a4c6.js"><link rel="prefetch" href="/learning-area/assets/js/7.f605d29a.js"><link rel="prefetch" href="/learning-area/assets/js/70.d45a6f4b.js"><link rel="prefetch" href="/learning-area/assets/js/71.199480b9.js"><link rel="prefetch" href="/learning-area/assets/js/72.3efba930.js"><link rel="prefetch" href="/learning-area/assets/js/73.a8b1f0cf.js"><link rel="prefetch" href="/learning-area/assets/js/74.159b0ce8.js"><link rel="prefetch" href="/learning-area/assets/js/75.70a92eb2.js"><link rel="prefetch" href="/learning-area/assets/js/76.ae591c94.js"><link rel="prefetch" href="/learning-area/assets/js/77.460c2dd5.js"><link rel="prefetch" href="/learning-area/assets/js/78.632f98da.js"><link rel="prefetch" href="/learning-area/assets/js/79.ac4d76f1.js"><link rel="prefetch" href="/learning-area/assets/js/8.650de3e5.js"><link rel="prefetch" href="/learning-area/assets/js/80.e7660b17.js"><link rel="prefetch" href="/learning-area/assets/js/81.d541a3d8.js"><link rel="prefetch" href="/learning-area/assets/js/82.8290e678.js"><link rel="prefetch" href="/learning-area/assets/js/83.5803221a.js"><link rel="prefetch" href="/learning-area/assets/js/84.19a0f6ae.js"><link rel="prefetch" href="/learning-area/assets/js/85.1b760f11.js"><link rel="prefetch" href="/learning-area/assets/js/86.d9d2f919.js"><link rel="prefetch" href="/learning-area/assets/js/87.11da8bf7.js"><link rel="prefetch" href="/learning-area/assets/js/88.b605c899.js"><link rel="prefetch" href="/learning-area/assets/js/89.e712c519.js"><link rel="prefetch" href="/learning-area/assets/js/9.870c6369.js"><link rel="prefetch" href="/learning-area/assets/js/90.86f346f0.js"><link rel="prefetch" href="/learning-area/assets/js/91.1e909d5e.js"><link rel="prefetch" href="/learning-area/assets/js/92.37ca7a25.js"><link rel="prefetch" href="/learning-area/assets/js/93.8a12c218.js">
    <link rel="stylesheet" href="/learning-area/assets/css/0.styles.d66e2873.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/learning-area/" class="home-link router-link-active"><!----> <span class="site-name">阿李贝斯的学习文档</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/learning-area/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="https://github.com/strugglinglee/learning-area" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/learning-area/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="https://github.com/strugglinglee/learning-area" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><a href="/learning-area/css" class="sidebar-heading clickable"><span>CSS</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/learning-area/javascript" class="sidebar-heading clickable"><span>JS</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/learning-area/vue" class="sidebar-heading clickable"><span>VUE</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/learning-area/git" class="sidebar-heading clickable"><span>Git</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/learning-area/前端工程化" class="sidebar-heading clickable"><span>前端工程化</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/learning-area/图形学" class="sidebar-heading clickable"><span>图形学</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/learning-area/业务相关" class="sidebar-heading clickable"><span>业务相关</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>性能优化</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/learning-area/docker" class="sidebar-heading clickable"><span>Docker</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/learning-area/node" class="sidebar-heading clickable"><span>Node.js</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/learning-area/vite" class="sidebar-heading clickable"><span>Vite</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/learning-area/others" class="sidebar-heading clickable router-link-active open"><span>其他</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>灵感想法</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>名词解释</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/learning-area/others/名词解释/基础.html" class="sidebar-link">基础</a></li><li><a href="/learning-area/others/名词解释/登录认证相关.html" class="sidebar-link">登录认证相关</a></li><li><a href="/learning-area/others/名词解释/代码分割.html" class="sidebar-link">代码分割</a></li><li><a href="/learning-area/others/名词解释/模块引入方式.html" class="sidebar-link">模块引入方式</a></li><li><a href="/learning-area/others/名词解释/有限状态机.html" class="sidebar-link">有限状态机</a></li><li><a href="/learning-area/others/名词解释/CJS, AMD, UMD 和 ESM.html" class="sidebar-link">CJS, AMD, UMD 和 ESM</a></li><li><a href="/learning-area/others/名词解释/FLUX架构.html" class="active sidebar-link">FLUX架构</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/learning-area/others/名词解释/FLUX架构.html#什么是状态管理" class="sidebar-link">什么是状态管理</a></li><li class="sidebar-sub-header"><a href="/learning-area/others/名词解释/FLUX架构.html#flux基本概念" class="sidebar-link">FLUX基本概念</a></li><li class="sidebar-sub-header"><a href="/learning-area/others/名词解释/FLUX架构.html#flux单向流动过程" class="sidebar-link">FLUX单向流动过程</a></li><li class="sidebar-sub-header"><a href="/learning-area/others/名词解释/FLUX架构.html#flux详解" class="sidebar-link">FLUX详解</a></li><li class="sidebar-sub-header"><a href="/learning-area/others/名词解释/FLUX架构.html#redux" class="sidebar-link">Redux</a></li><li class="sidebar-sub-header"><a href="/learning-area/others/名词解释/FLUX架构.html#vuex" class="sidebar-link">Vuex</a></li><li class="sidebar-sub-header"><a href="/learning-area/others/名词解释/FLUX架构.html#vuex-vs-redux" class="sidebar-link">Vuex vs Redux</a></li></ul></li><li><a href="/learning-area/others/名词解释/git-alias.html" class="sidebar-link">git-alias</a></li><li><a href="/learning-area/others/名词解释/markdown语法.html" class="sidebar-link">markdown语法</a></li><li><a href="/learning-area/others/名词解释/esbuild.html" class="sidebar-link">esbuild</a></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>效率提升</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>vscode相关</span> <span class="arrow right"></span></p> <!----></section></li><li><a href="/learning-area/others/收藏组件库.html" class="sidebar-link">vue指令</a></li><li><a href="/learning-area/others/oh-my-zsh/oh-my-zsh.html" class="sidebar-link">oh-my-zsh</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="flux架构"><a href="#flux架构" class="header-anchor">#</a> FLUX架构</h1> <blockquote><p>参考文章:</p> <ol><li><a href="http://www.ruanyifeng.com/blog/2016/01/flux.html" target="_blank" rel="noopener noreferrer">阮一峰-Flux架构入门教程<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://www.ruanyifeng.com/blog/2016/09/redux_tutorial_part_one_basic_usages.html" target="_blank" rel="noopener noreferrer">阮一峰-Redux入门教程<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://juejin.cn/post/68449039290634240135" target="_blank" rel="noopener noreferrer">掘金文章<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ol></blockquote> <h2 id="什么是状态管理"><a href="#什么是状态管理" class="header-anchor">#</a> 什么是状态管理</h2> <p>状态管理就是把组件之间需要共享的状态抽取出来，遵循特定的约定，统一来管理，让状态的变化可以预测。</p> <h2 id="flux基本概念"><a href="#flux基本概念" class="header-anchor">#</a> FLUX基本概念</h2> <p>FLUX是一种架构思想，专门解决软件的结构问题</p> <p><strong>FLUX将一个应用分成四个部分</strong></p> <ul><li>View视图层</li> <li>Action(动作): 视图层发出的消息（比如mouseClick）</li> <li>Dispatcher(派发器)：用来接收Actions、执行回调函数</li> <li>Store（数据层）：用来存放应用的状态，一旦发生变动，就提醒Views要更新页面</li></ul> <h2 id="flux单向流动过程"><a href="#flux单向流动过程" class="header-anchor">#</a> FLUX单向流动过程</h2> <p>保证了流程的清晰</p> <ol><li>用户访问View</li> <li>View发出用户的Action</li> <li>Dispatcher收到Action,要求Store进行相应的更新</li> <li>Store 更新后，发出一个&quot;change&quot;事件</li> <li>View 收到&quot;change&quot;事件后，更新页面</li></ol> <h2 id="flux详解"><a href="#flux详解" class="header-anchor">#</a> FLUX详解</h2> <h3 id="view"><a href="#view" class="header-anchor">#</a> View</h3> <p>一旦用户操作，调用相关方法，向Dispatcher发出一个Action</p> <h3 id="action"><a href="#action" class="header-anchor">#</a> Action</h3> <p>每个Action都是一个对象，包含一个actionType属性和一些其他的属性</p> <ul><li>Store的改变只能通过Action</li> <li>具体Action的处理逻辑一般放在Store里</li> <li>Action 对象包含 type （类型）与 payload （传递参数）</li></ul> <h3 id="dispatcher"><a href="#dispatcher" class="header-anchor">#</a> Dispatcher</h3> <p>作用是将Action派发到Store，可以将其看做一个路由器，负责在View和Store之间，建立Action的正确传递路线。</p> <p>Dispatcher只能有一个，而且是全局的。</p> <p>只用来派发Action，不应该有其他逻辑</p> <h3 id="store"><a href="#store" class="header-anchor">#</a> Store</h3> <p>保存整个应用的状态，需要在变动后向View发送change事件，必须实现事件接口
数据层，存放应用状态与更新状态的方法，一旦发生变动，就提醒 Views 更新页面</p> <h2 id="redux"><a href="#redux" class="header-anchor">#</a> Redux</h2> <p>将Flux与函数式编程结合在一起</p> <h3 id="设计思想"><a href="#设计思想" class="header-anchor">#</a> 设计思想</h3> <ol><li>web应用是一个状态机，视图与状态是一一对应的</li> <li>所有的状态，保存在一个对象里面</li></ol> <h3 id="基本概念"><a href="#基本概念" class="header-anchor">#</a> 基本概念</h3> <h4 id="store-2"><a href="#store-2" class="header-anchor">#</a> store</h4> <p>保存数据的地方，可以看成一个容器。整个应用只能有一个Store。</p> <p>redux提供createStore这个函数用来生成Store</p> <h4 id="state"><a href="#state" class="header-anchor">#</a> state</h4> <p>Store对象包含所有数据。如果想得到某个时点的数据，就要对Store生成快照。这种时点的数据集合叫做State。</p> <p>当前时刻的state,可以通过store.getState()拿到</p> <p>一个State对应一个View，是要State相同，View就相同。</p> <h4 id="action-2"><a href="#action-2" class="header-anchor">#</a> Action</h4> <p>state 的变化，会导致 View 的变化。但是，用户接触不到 State，只能接触到 View。所以，State 的变化必须是 View 导致的。
Action 就是 View 发出的通知，表示 State 应该要发生变化了。</p> <p>Action 是一个对象。其中的type属性是必须的，表示 Action 的名称。</p> <p>Action 描述当前发生的事情。改变 State 的唯一办法，就是使用 Action。它会运送数据到 Store。</p> <h4 id="store-dispatch"><a href="#store-dispatch" class="header-anchor">#</a> store.dispatch()</h4> <p>store.dispatch()是 View 发出 Action 的唯一方法。
store.dispatch接受一个 Action 对象作为参数，将它发送出去。</p> <h4 id="reducer"><a href="#reducer" class="header-anchor">#</a> Reducer</h4> <p>Store 收到 Action 以后，必须给出一个新的 State，这样 View 才会发生变化。
这种 State 的<strong>计算过程</strong>就叫做 Reducer。</p> <p>Reducer 是一个函数，它接受 Action 和当前 State 作为参数，返回一个新的 State。</p> <p>createStore接受 Reducer 作为参数，生成一个新的 Store。
以后每当store.dispatch发送过来一个新的 Action，就会自动调用 Reducer，得到新的 State。</p> <h5 id="纯函数"><a href="#纯函数" class="header-anchor">#</a> 纯函数</h5> <p>Reducer 函数最重要的特征是，它是一个纯函数。也就是说，只要是同样的输入，必定得到同样的输出。</p> <p>纯函数是函数式编程的概念，必须遵守以下一些约束。</p> <ul><li>不得改写参数</li> <li>不能调用系统 I/O 的API</li> <li>不能调用Date.now()或者Math.random()等不纯的方法，因为每次会得到不一样的结果</li></ul> <p>由于 Reducer 是纯函数，就可以保证同样的State，必定得到同样的 View。
但也正因为这一点，Reducer 函数里面不能改变 State，必须返回一个全新的对象</p> <p>最好把 State 对象设成只读。你没法改变它，要得到新的 State，唯一办法就是生成一个新对象。
这样的好处是，任何时候，与某个 View 对应的 State 总是一个不变的对象。</p> <h4 id="store-subscribe"><a href="#store-subscribe" class="header-anchor">#</a> store.subscribe()</h4> <p>Store 允许使用store.subscribe方法设置监听函数，一旦 State 发生变化，就自动执行这个函数。</p> <p>只要把 View 的更新函数（对于 React 项目，就是组件的render方法或setState方法）放入listen，就会实现 View 的自动渲染。</p> <p>store.subscribe方法返回一个函数，调用这个函数就可以解除监听。</p> <h4 id="middleware"><a href="#middleware" class="header-anchor">#</a> Middleware</h4> <p>Redux 还支持中间件，用于管理异步数据流。
常用库：redux-actions, redux-thunk, redux-promise 。</p> <h4 id="combinereducers"><a href="#combinereducers" class="header-anchor">#</a> combineReducers</h4> <p>Redux 提供了一个combineReducers方法，用于 Reducer 的拆分。
你只要定义各个子 Reducer 函数，然后用这个方法，将它们合成一个大的 Reducer。</p> <h3 id="react-router"><a href="#react-router" class="header-anchor">#</a> React-Router</h3> <p>使用Provide在Router外面包一层，Provide唯一的功能就是传入Store对象</p> <h3 id="redux特点"><a href="#redux特点" class="header-anchor">#</a> redux特点</h3> <ul><li>**单向数据流。**View 发出 Action (store.dispatch(action))，Store 调用 Reducer 计算出新的 state ，若 state 产生变化，则调用监听函数重新渲染 View （store.subscribe(render)）</li> <li><strong>单一数据源</strong>，只有一个 Store</li> <li><strong>state 是只读的</strong>，每次状态更新之后只能返回一个新的 state</li> <li><strong>没有 Dispatcher</strong> ，而是在 Store 中集成了 dispatch 方法，<strong>store.dispatch() 是 View 发出 Action 的唯一途径</strong></li> <li>支持使用**中间件（Middleware）**管理异步数据流</li></ul> <h2 id="vuex"><a href="#vuex" class="header-anchor">#</a> Vuex</h2> <h3 id="基本概念-2"><a href="#基本概念-2" class="header-anchor">#</a> 基本概念</h3> <h4 id="store-3"><a href="#store-3" class="header-anchor">#</a> Store</h4> <p>Vuex 采用单一状态树，每个应用仅有一个 Store 实例，在该实例下包含了 state, actions, mutations, getters, modules</p> <h4 id="state-2"><a href="#state-2" class="header-anchor">#</a> State</h4> <p>Vuex 为单一数据源</p> <p>可以通过 mapState 辅助函数将 state 作为计算属性访问，或者将通过 Store 将 state 注入全局之后使用 this.$store.state 访问
State 更新视图是通过 vue 的双向绑定机制实现的</p> <h4 id="getter"><a href="#getter" class="header-anchor">#</a> Getter</h4> <p>Getter 的作用与 filters 有一些相似，可以将 State 进行过滤后输出</p> <h4 id="mutation"><a href="#mutation" class="header-anchor">#</a> Mutation</h4> <p>Mutaion 是 vuex 中改变 State 的唯一途径（严格模式下），并且只能是同步操作。Vuex 中通过 store.commit() 调用 Mutation</p> <h4 id="action-3"><a href="#action-3" class="header-anchor">#</a> Action</h4> <p>一些对 State 的异步操作可以放在 Action 中，并通过在 Action 提交 Mutaion 变更状态</p> <p>Action 通过 store.dispatch() 方法触发
可以通过 mapActions 辅助函数将 vue 组件的 methods 映射成 store.dispatch 调用（需要先在根节点注入 store）</p> <h4 id="module"><a href="#module" class="header-anchor">#</a> Module</h4> <p>当 Store 对象过于庞大时，可根据具体的业务需求分为多个 Module ，每个 Module 都具有自己的 state 、mutation 、action 、getter</p> <h3 id="vuex-的特点"><a href="#vuex-的特点" class="header-anchor">#</a> Vuex 的特点</h3> <ul><li><strong>单向数据流</strong>。View 通过 store.dispatch() 调用 Action ，在 Action 执行完异步操作之后通过 store.commit() 调用 Mutation 更新 State ，通过 vue 的响应式机制进行视图更新</li> <li><strong>单一数据源</strong>，和 Redux 一样<strong>全局只有一个 Store 实例</strong></li> <li><strong>只能应用于 Vue</strong></li></ul> <h2 id="vuex-vs-redux"><a href="#vuex-vs-redux" class="header-anchor">#</a> Vuex vs Redux</h2> <table><thead><tr><th style="text-align:left;">Redux</th> <th style="text-align:left;">Vuex</th></tr></thead> <tbody><tr><td style="text-align:left;">action （同步action ，或借助 中间件 实现异步操作，action 不会改变 store，只是描述了怎么改变store）</td> <td style="text-align:left;">mutation（用于同步操作） 、action（可用于异步操作，提交 mutation）</td></tr> <tr><td style="text-align:left;">reducer（纯函数，根据 action 和旧的 store 计算出新的 store</td> <td style="text-align:left;">mutation里面直接修改 state</td></tr> <tr><td style="text-align:left;">store.getState() 这个 API 获取 store 树，还有 store.subscribe(listener) 订阅 store 的变化，当 store 改变时会调用监听器；</td> <td style="text-align:left;">Vuex 有一个 getter 的概念用于根据 state 派生出一些数据，像 Vue 的计算属性一样，当 state 改变时会重新计算出一个结果出来，提供给需要的组件。</td></tr> <tr><td style="text-align:left;">通过 combineReducers（）结合各个组件的 reducer，各个组件可以单独管理自己的状态，最后合并为一个 reducer 用于生成一个 store</td> <td style="text-align:left;">用 Module 这个概念划分 store，与 Redux 一样，可以多层嵌套子状态。</td></tr></tbody></table> <h3 id="redux-的三大原则"><a href="#redux-的三大原则" class="header-anchor">#</a> Redux 的三大原则：</h3> <ol><li>单一数据源（一个Redux应用只有一个store），也是单向的数据流</li> <li>state只读（唯一改变 state 的方法就是触发 action，action 是一个用于描述已发生事件的普通对象。</li> <li>使用纯函数（reducer）来修改state。</li></ol> <p>Redux 得益于 <strong>中间件机制</strong>，利用 <code>redux-thunk</code>（redux-thunk 可以 dispatch 函数，这个函数用于生成 action，所以在这个函数里面我们可以进行异步操作，等异步的结果出来后再放在 action 里面将这个 action 用 dispatch 分发出去, 而这个函数被叫做 “action creator” ），可以将异步逻辑放在  <code>action creator</code> 里面，<strong>通过 action creator 做一个控制反转</strong>， 给 action creator 传入 dispatch 作为参数，于是就可以 dispatch  action，（原本是通过 dispatch 来分发 action ,现在是异步 action 即 action creator 掌握了控制权调用 dispatch，所以叫控制反转）</p> <p>Redux 并没有创造单独的概念出来专门用于异步逻辑，它是利用了 Redux 自己实现的中间件机制，中间件从 dispatch 一个异步 action 到 action 到达 reducer 之间处理 action，在这期间通过异步操作得到的结果可以放到 action 里面再通过 dispatch 分发到 reducer，以前 dispatch 一个 action 之后，这个 action 回立即到达 reducer ，所以是同步 action，现在在 action creator 里面，我们通过控制反转，可以等待异步操作结果再生成 action 分发，所以叫做异步 action：</p> <h3 id="vuex-的三大原则"><a href="#vuex-的三大原则" class="header-anchor">#</a> Vuex 的三大原则：</h3> <ol><li>应用层级的状态应该集中到单个 store 对象中。</li> <li>提交 mutation 是更改状态的唯一方法，并且这个过程是同步的。</li> <li>异步逻辑都应该封装到 action 里面。</li></ol> <p>Vuex 是用 mutation 来对应 Redux 的 action，另外 Vuex 又创造了一个 action 来提交 mutation 并通过异步提交 mutation 来实现异步操作结果能够到达 state.</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/learning-area/others/名词解释/CJS, AMD, UMD 和 ESM.html" class="prev">
        CJS, AMD, UMD 和 ESM
      </a></span> <span class="next"><a href="/learning-area/others/名词解释/git-alias.html">
        git-alias
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/learning-area/assets/js/app.58839253.js" defer></script><script src="/learning-area/assets/js/2.716a5f7b.js" defer></script><script src="/learning-area/assets/js/45.ba115e4e.js" defer></script>
  </body>
</html>
